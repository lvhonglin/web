<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="box">

</div>
<script>
  //1.es6的promise
  var box=document.getElementById("box")

  function loadImageAsync(url){
    var promise=new Promise(function (resolve,reject){
      // 异步处理
      const image=new Image()//创建image对象
      image.src=url
      image.onload=function (){
        resolve(image)
      }
      image.onerror==function(){
        reject(new Error("could not load image"))
      }
      image.src=url
    })
    return promise
  }
  const promise=loadImageAsync("http://iwenwiki.com/api/musicimg/2.png")
  promise.then(function(data){
    //成功
    box.appendChild(data)
  },
  function (error){
    //失败
    box.innerHTML="图片加载失败"
    console.log(error)
  })
</script>
</body>
</html>